import{Q as U}from"./QImg.1e913361.js";import{_ as os,d as ls,k as Y,aS as ns,u as is,aa as cs,r as G,c as r,o as ds,m as o,n as u,p as n,q as e,f as t,y as us,z as a,s as c,B as E,v as f,x as T,aB as rs,F as A,C as P,t as L,Q as ms,D as _s,E as vs}from"./index.fed07d25.js";import{Q as fs}from"./QItemSection.83a4db19.js";import{Q as w}from"./QChip.ddc19688.js";import{Q as C}from"./QCard.8dd24b16.js";import{Q as z}from"./QSeparator.141d3b5d.js";import{a as hs,Q as gs}from"./QCarousel.aa275072.js";import{Q as J}from"./QTooltip.d13f14d1.js";import{Q as xs}from"./QItemLabel.481932a1.js";import{Q as ws}from"./QSpace.793954d4.js";import{Q as bs}from"./QCircularProgress.2d840d2d.js";import{Q as ks}from"./QPage.a2778391.js";import{_ as qs}from"./default-avatar-icon.adf04dc9.js";import{u as Ss}from"./property.6b084a55.js";import{u as Qs}from"./user.7d1f3ee4.js";import{u as Es}from"./account.73bae2ad.js";import"./use-dark.35ad09a7.js";import"./use-panel.2bb449f6.js";import"./touch.3df10340.js";import"./use-timeout.7a3d49e4.js";import"./focus-manager.b507780d.js";import"./use-cache.b0833c75.js";import"./position-engine.b62a05cf.js";import"./scroll.59255f11.js";import"./format.c860d4da.js";const K=b=>(_s("data-v-d78da978"),b=b(),vs(),b),Ps={class:"row justify-between q-mt-md"},Cs={class:"col-xl-12 col-lg-4 col-md-4 col-sm-12 col-xs-12 q-pa-md q-ml-xs"},Rs={class:"row justify-center"},Is={class:"column items-center q-mr-lg"},Us={class:"row q-ma-md"},Ts={class:"text-bold text-h5"},As={class:"column items-center"},Ls={class:"column items-start",style:{"align-content":"center"}},zs={class:"q-ml-xs text-bold"},Bs=K(()=>e("span",{class:"q-ml-xs text-bold"},"English",-1)),Ns={class:"q-ml-xs text-bold"},Ms={class:"q-ml-xs text-bold"},Ds={class:"q-ml-xs text-bold"},Fs={class:"col-xl-7 col-lg-12 col-md-12 col-sm-12 col-xs-12"},Vs={class:"text-bold text-h5"},js={class:"row"},Os={class:"col-xl-4 col-lg-4 col-md-5 col-sm-6 col-xs-12 q-py-md q-px-md cursor-pointer"},Hs={class:"row"},$s={class:"q-my-sm"},Ys={class:"row"},Gs={key:0},Js={class:"q-mr-sm"},Ks={class:"q-mt-md"},Ws={class:"row"},Xs={class:"text-bold text-positive"},Zs={class:"text-black"},ps={key:0},ys={class:"text-grey"},se={key:1},ee={class:"q-pa-lg flex flex-center"},te={class:"text-center q-pa-md col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12"},ae=K(()=>e("p",null,"Loading please wait",-1)),oe=ls({__name:"tenantListings",setup(b){const B=Y(),k=ns(),N=is(),q=cs(),W=Qs(),S=Es(),m=Ss(),M=Y(),h=G(20),D=G([1,1,1,1,1,1,1,1,1,1,1]);r(()=>W.getAvatar);const Q=r(()=>m.getProperties),R=r(()=>m.getPropertyReviews);r(()=>m.getPropertyRating);const X=r(()=>Q.value.map(_=>_.id));r(()=>S.getHostAvatar);const i=r(()=>S.getHost),F=r(()=>m.getResponse),Z=r(()=>m.isLoading);async function p(){await S.findUserPhoto({objectType:"USER",objectIds:[k.params.id],fileType:"FILE_TYPE_IMAGE"},!0)}async function y(){await m.findPropertyDetails({pageSize:6,tenantId:k.params.id,hostId:B.currentUser().aud[0]})}async function ss(){await S.findUserInfo({ids:[k.params.id]},!0)}async function es(){Q.value.length>0&&await m.findPropertyRating({objectType:"PROPERTY",object_ids:X.value},1)}async function ts(){var _;await m.findPropertyDetails({pageSize:6,tenantId:k.params.id,hostId:B.currentUser().aud[0],pageToken:(_=F.value)==null?void 0:_.nextPageToken})}function as(_){M.currentUser()&&M.currentUser().user_type===2?N.push(`/property-details/${_}/user`):N.push(`/listing-stay-details/${_}`)}return ds(async()=>{await y(),await es(),await p(),await ss()}),(_,V)=>(o(),u(ks,{class:"q-mx-md"},{default:n(()=>[e("div",Ps,[t(C,{flat:"",bordered:"",class:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 q-px-lg q-my-md"},{default:n(()=>{var g,x;return[e("div",Cs,[e("div",Rs,[e("div",Is,[e("div",Us,[t(fs,{avatar:""},{default:n(()=>[t(us,{size:"100px"},{default:n(()=>{var l,s;return[(l=i.value)!=null&&l.imgUri?(o(),u(U,{key:0,src:(s=i.value)==null?void 0:s.imgUri},null,8,["src"])):(o(),u(U,{key:1,src:qs}))]}),_:1})]),_:1})]),e("div",Ts,a((g=i.value)==null?void 0:g.firstName)+" "+a((x=i.value)==null?void 0:x.lastName),1)]),e("div",As,[e("div",Ls,[t(w,{"text-color":"black",color:"white",icon:"home",size:"15px",class:"start"},{default:n(()=>{var l,s,v;return[c(" Currently lives in "),e("span",zs,a(((l=i.value)==null?void 0:l.addressLine)!=""&&((s=i.value)==null?void 0:s.addressLine)!=null?(v=i.value)==null?void 0:v.addressLine:"Not available"),1)]}),_:1}),t(w,{"text-color":"black",color:"white",icon:"language",size:"15px",class:"start"},{default:n(()=>[c(" Language spoken "),Bs]),_:1}),t(w,{"text-color":"black",color:"white",icon:"event",size:"15px",class:"start"},{default:n(()=>{var l;return[c(" Joined on "),e("span",Ns,a(E(q).formatStartDate((l=i.value)==null?void 0:l.created)),1)]}),_:1}),t(w,{"text-color":"black",color:"white",icon:"email",size:"15px",class:"start"},{default:n(()=>{var l;return[c(" Email on "),e("span",Ms,a((l=i.value)==null?void 0:l.email),1)]}),_:1}),t(w,{"text-color":"black",color:"white",icon:"call",size:"15px",class:"start"},{default:n(()=>{var l;return[c(" Phone on "),e("span",Ds,a((l=i.value)==null?void 0:l.phone),1)]}),_:1})])])])])]}),_:1}),e("div",Fs,[Z.value?(o(),u(C,{key:1,style:{width:"100%"},class:"row justify-center",flat:""},{default:n(()=>[e("div",te,[ae,t(bs,{indeterminate:"",rounded:"",size:"50px",color:"warning",class:"q-ma-md"})])]),_:1})):(o(),u(C,{key:0,bordered:"",flat:"",class:"col-xl-7 col-lg-7 col-md-12 col-sm-12 col-xs-12 q-px-lg q-py-md"},{default:n(()=>{var g,x,l;return[e("div",Vs,a((g=i.value)==null?void 0:g.firstName)+" "+a((x=i.value)==null?void 0:x.lastName)+"'s rentings",1),t(z,{class:"q-my-lg",style:{width:"5%"}}),e("div",js,[(o(!0),f(A,null,T(Q.value,(s,v)=>(o(),f("div",Os,[(o(),u(C,{key:v,flat:"",onClick:I=>as(s.id)},{default:n(()=>{var I,j,O,H;return[(o(),u(hs,{modelValue:D.value[v],"onUpdate:modelValue":d=>D.value[v]=d,"transition-prev":"slide-right","transition-next":"slide-left",swipeable:"",animated:"",arrows:"","control-color":"amber",height:"auto",key:v,autoplay:!1,infinite:"",onClick:V[0]||(V[0]=rs(()=>{},["stop"]))},{default:n(()=>{var d;return[(o(!0),f(A,null,T((d=Q.value[0])==null?void 0:d.images,$=>(o(),u(gs,{name:$.id,class:"q-carousel__slides-container",key:v},{default:n(()=>[e("div",Hs,[t(U,{ratio:4/3,class:"row",src:$.uri},null,8,["src"])])]),_:2},1032,["name"]))),128))]}),_:2},1032,["modelValue","onUpdate:modelValue"])),e("div",$s,[e("div",Ys,[(o(!0),f(A,null,T(s==null?void 0:s.features,d=>(o(),f("div",null,[d.feature=="FEATURE_BATH_ROOMS"||d.feature=="FEATURE_BED_ROOMS"?(o(),f("div",Gs,[t(P,{name:E(q).featureIcon(d.feature),class:"q-my-md q-mr-xs"},null,8,["name"]),e("span",Js,a(d.value)+" "+a(d.feature=="FEATURE_SQUARE_METERS"?"Sq.Ft":d.feature=="FEATURE_BED_ROOMS"?"beds":"baths"),1)])):L("",!0)]))),256))]),e("div",null,[t(xs,{class:"two-line-break text-h6 text-bold"},{default:n(()=>[c(a((s==null?void 0:s.name.length)>h.value?s.name.substring(0,h.value)+"...":s.name)+" ",1),s.name>h.value?(o(),u(J,{key:0},{default:n(()=>[c(a(s.name),1)]),_:2},1024)):L("",!0)]),_:2},1024),e("div",Ks,[t(P,{name:"location_on",class:"no-margin",size:"20px"}),e("span",null,[c(a((s==null?void 0:s.address.street)>h.value?(s==null?void 0:s.address.street.substring(0,h.value))+"...":s==null?void 0:s.address.street)+" ",1),(s==null?void 0:s.address.street.length)>h.value?(o(),u(J,{key:0},{default:n(()=>[c(a(s==null?void 0:s.address.street),1)]),_:2},1024)):L("",!0)])]),t(z,{class:"q-my-md",style:{width:"20%"}}),e("div",Ws,[e("div",null,[e("div",Xs,[c(a((I=s==null?void 0:s.unitPrice)==null?void 0:I.currencyCode)+" "+a(E(q).commaSeparate(s==null?void 0:s.unitPrice.units))+" /",1),e("span",Zs,a(s==null?void 0:s.chargeCycle.toLowerCase()),1)])]),t(ws),((j=R.value[s==null?void 0:s.id])==null?void 0:j.reviews)!=null?(o(),f("div",ps,[t(P,{name:"star",size:"20px",color:"warning"}),c(" "+a(E(q).computeAverageRating((O=R.value[s==null?void 0:s.id])==null?void 0:O.reviews))+" ",1),e("span",ys,"("+a((H=R.value[s==null?void 0:s.id])==null?void 0:H.reviews[0].reviewCount)+")",1)])):(o(),f("div",se,[t(P,{name:"star_border",size:"20px"}),c(" None ")]))])])])]}),_:2},1032,["onClick"]))]))),256))]),t(z,{class:"q-my-md"}),e("div",ee,[t(ms,{rounded:"","no-caps":"",color:"warning",label:"Show more","icon-right":"expand_more",disable:((l=F.value)==null?void 0:l.nextPageToken)=="",onClick:ts},null,8,["disable"])])]}),_:1}))])])]),_:1}))}});var Ue=os(oe,[["__scopeId","data-v-d78da978"]]);export{Ue as default};
