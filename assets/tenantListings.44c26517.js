import{Q as U}from"./QImg.baa48024.js";import{_ as as,d as os,k as $,aS as ls,u as ns,aa as is,r as Y,c as r,o as cs,m as o,n as u,p as n,q as e,f as t,y as ds,z as a,s as c,B as E,v as f,x as T,aB as us,F as A,C as P,t as L,Q as rs,D as ms,E as _s}from"./index.2b9e9d53.js";import{Q as vs}from"./QItemSection.862d61a6.js";import{Q as w}from"./QChip.9ba799e8.js";import{Q as C}from"./QCard.0fed3ede.js";import{Q as z}from"./QSeparator.15efe275.js";import{a as fs,Q as hs}from"./QCarousel.51b1a666.js";import{Q as G}from"./QTooltip.dc3ddfc4.js";import{Q as gs}from"./QItemLabel.dac0b2c9.js";import{Q as xs}from"./QSpace.6e7508ce.js";import{Q as ws}from"./QCircularProgress.cbd7b994.js";import{Q as bs}from"./QPage.53d8179f.js";import{_ as ks}from"./default-avatar-icon.adf04dc9.js";import{u as qs}from"./property.8a240105.js";import{u as Ss}from"./user.bfeeb0ac.js";import{u as Qs}from"./account.51897530.js";import"./use-dark.bf37dfcc.js";import"./use-panel.a8166fbf.js";import"./touch.3df10340.js";import"./selection.bcc42b1d.js";import"./use-cache.b0833c75.js";import"./position-engine.2ebdcb7d.js";import"./use-timeout.798beefb.js";import"./focus-manager.b507780d.js";import"./scroll.65b5ece7.js";import"./format.c860d4da.js";const J=b=>(ms("data-v-11e1a564"),b=b(),_s(),b),Es={class:"row justify-between q-mt-md"},Ps={class:"col-xl-12 col-lg-4 col-md-4 col-sm-12 col-xs-12 q-pa-md q-ml-xs"},Cs={class:"row justify-center"},Rs={class:"column items-center q-mr-lg"},Is={class:"row q-ma-md"},Us={class:"text-bold text-h5"},Ts={class:"column items-center"},As={class:"column items-start",style:{"align-content":"center"}},Ls={class:"q-ml-xs text-bold"},zs=J(()=>e("span",{class:"q-ml-xs text-bold"},"English",-1)),Bs={class:"q-ml-xs text-bold"},Ns={class:"q-ml-xs text-bold"},Ms={class:"q-ml-xs text-bold"},Ds={class:"col-xl-7 col-lg-12 col-md-12 col-sm-12 col-xs-12"},Fs={class:"text-bold text-h5"},Vs={class:"row"},js={class:"col-xl-4 col-lg-4 col-md-5 col-sm-6 col-xs-12 q-py-md q-px-md cursor-pointer"},Os={class:"row"},Hs={class:"q-my-sm"},$s={class:"row"},Ys={key:0},Gs={class:"q-mr-sm"},Js={class:"q-mt-md"},Ks={class:"row"},Ws={class:"text-bold text-positive"},Xs={class:"text-black"},Zs={key:0},ps={class:"text-grey"},ys={key:1},se={class:"q-pa-lg flex flex-center"},ee={class:"text-center q-pa-md col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12"},te=J(()=>e("p",null,"Loading please wait",-1)),ae=os({__name:"tenantListings",setup(b){const B=$(),k=ls(),N=ns(),q=is(),K=Ss(),S=Qs(),m=qs(),M=$(),h=Y(20),D=Y([1,1,1,1,1,1,1,1,1,1,1]);r(()=>K.getAvatar);const Q=r(()=>m.getProperties),R=r(()=>m.getPropertyReviews);r(()=>m.getPropertyRating);const W=r(()=>Q.value.map(_=>_.id));r(()=>S.getHostAvatar);const i=r(()=>S.getHost),F=r(()=>m.getResponse),X=r(()=>m.isLoading);async function Z(){await S.findUserPhoto({objectType:"USER",objectIds:[k.params.id],fileType:"FILE_TYPE_IMAGE"},!0)}async function p(){await m.findPropertyDetails({pageSize:6,tenantId:k.params.id,hostId:B.currentUser().aud[0]})}async function y(){await S.findUserInfo({ids:[k.params.id]},!0)}async function ss(){Q.value.length>0&&await m.findPropertyRating({objectType:"PROPERTY",object_ids:W.value},1)}async function es(){var _;await m.findPropertyDetails({pageSize:6,tenantId:k.params.id,hostId:B.currentUser().aud[0],pageToken:(_=F.value)==null?void 0:_.nextPageToken})}function ts(_){M.currentUser()&&M.currentUser().user_type===2?N.push(`/property-details/${_}/user`):N.push(`/listing-stay-details/${_}`)}return cs(async()=>{await p(),await ss(),await Z(),await y()}),(_,V)=>(o(),u(bs,{class:"q-mx-md"},{default:n(()=>[e("div",Es,[t(C,{flat:"",bordered:"",class:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 q-px-lg q-my-md"},{default:n(()=>{var g,x;return[e("div",Ps,[e("div",Cs,[e("div",Rs,[e("div",Is,[t(vs,{avatar:""},{default:n(()=>[t(ds,{size:"100px"},{default:n(()=>{var l,s;return[(l=i.value)!=null&&l.imgUri?(o(),u(U,{key:0,src:(s=i.value)==null?void 0:s.imgUri},null,8,["src"])):(o(),u(U,{key:1,src:ks}))]}),_:1})]),_:1})]),e("div",Us,a((g=i.value)==null?void 0:g.firstName)+" "+a((x=i.value)==null?void 0:x.lastName),1)]),e("div",Ts,[e("div",As,[t(w,{"text-color":"black",color:"white",icon:"home",size:"15px",class:"start"},{default:n(()=>{var l,s,v;return[c(" Currently lives in "),e("span",Ls,a(((l=i.value)==null?void 0:l.addressLine)!=""&&((s=i.value)==null?void 0:s.addressLine)!=null?(v=i.value)==null?void 0:v.addressLine:"Not available"),1)]}),_:1}),t(w,{"text-color":"black",color:"white",icon:"language",size:"15px",class:"start"},{default:n(()=>[c(" Language spoken "),zs]),_:1}),t(w,{"text-color":"black",color:"white",icon:"event",size:"15px",class:"start"},{default:n(()=>{var l;return[c(" Joined on "),e("span",Bs,a(E(q).formatStartDate((l=i.value)==null?void 0:l.created)),1)]}),_:1}),t(w,{"text-color":"black",color:"white",icon:"email",size:"15px",class:"start"},{default:n(()=>{var l;return[c(" Email on "),e("span",Ns,a((l=i.value)==null?void 0:l.email),1)]}),_:1}),t(w,{"text-color":"black",color:"white",icon:"call",size:"15px",class:"start"},{default:n(()=>{var l;return[c(" Phone on "),e("span",Ms,a((l=i.value)==null?void 0:l.phone),1)]}),_:1})])])])])]}),_:1}),e("div",Ds,[X.value?(o(),u(C,{key:1,style:{width:"100%"},class:"row justify-center",flat:""},{default:n(()=>[e("div",ee,[te,t(ws,{indeterminate:"",rounded:"",size:"50px",color:"warning",class:"q-ma-md"})])]),_:1})):(o(),u(C,{key:0,bordered:"",flat:"",class:"col-xl-7 col-lg-7 col-md-12 col-sm-12 col-xs-12 q-px-lg q-py-md"},{default:n(()=>{var g,x,l;return[e("div",Fs,a((g=i.value)==null?void 0:g.firstName)+" "+a((x=i.value)==null?void 0:x.lastName)+"'s listings",1),t(z,{class:"q-my-lg",style:{width:"5%"}}),e("div",Vs,[(o(!0),f(A,null,T(Q.value,(s,v)=>(o(),f("div",js,[(o(),u(C,{key:v,flat:"",onClick:I=>ts(s.id)},{default:n(()=>{var I,j,O;return[(o(),u(fs,{modelValue:D.value[v],"onUpdate:modelValue":d=>D.value[v]=d,"transition-prev":"slide-right","transition-next":"slide-left",swipeable:"",animated:"",arrows:"","control-color":"amber",height:"auto",key:v,autoplay:!1,infinite:"",onClick:V[0]||(V[0]=us(()=>{},["stop"]))},{default:n(()=>{var d;return[(o(!0),f(A,null,T((d=Q.value[0])==null?void 0:d.images,H=>(o(),u(hs,{name:H.id,class:"q-carousel__slides-container",key:v},{default:n(()=>[e("div",Os,[t(U,{ratio:4/3,class:"row",src:H.uri},null,8,["src"])])]),_:2},1032,["name"]))),128))]}),_:2},1032,["modelValue","onUpdate:modelValue"])),e("div",Hs,[e("div",$s,[(o(!0),f(A,null,T(s==null?void 0:s.features,d=>(o(),f("div",null,[d.feature=="FEATURE_BATH_ROOMS"||d.feature=="FEATURE_BED_ROOMS"?(o(),f("div",Ys,[t(P,{name:E(q).featureIcon(d.feature),class:"q-my-md q-mr-xs"},null,8,["name"]),e("span",Gs,a(d.value)+" "+a(d.feature=="FEATURE_SQUARE_METERS"?"Sq.Ft":d.feature=="FEATURE_BED_ROOMS"?"beds":"baths"),1)])):L("",!0)]))),256))]),e("div",null,[t(gs,{class:"two-line-break text-h6 text-bold"},{default:n(()=>[c(a((s==null?void 0:s.name.length)>h.value?s.name.substring(0,h.value)+"...":s.name)+" ",1),s.name>h.value?(o(),u(G,{key:0},{default:n(()=>[c(a(s.name),1)]),_:2},1024)):L("",!0)]),_:2},1024),e("div",Js,[t(P,{name:"location_on",class:"no-margin",size:"20px"}),e("span",null,[c(a((s==null?void 0:s.address.street)>h.value?(s==null?void 0:s.address.street.substring(0,h.value))+"...":s==null?void 0:s.address.street)+" ",1),(s==null?void 0:s.address.street.length)>h.value?(o(),u(G,{key:0},{default:n(()=>[c(a(s==null?void 0:s.address.street),1)]),_:2},1024)):L("",!0)])]),t(z,{class:"q-my-md",style:{width:"20%"}}),e("div",Ks,[e("div",null,[e("div",Ws,[c(a(s==null?void 0:s.unitPrice.currencyCode)+" "+a(E(q).commaSeparate(s==null?void 0:s.unitPrice.units))+" /",1),e("span",Xs,a(s==null?void 0:s.chargeCycle.toLowerCase()),1)])]),t(xs),((I=R.value[s==null?void 0:s.id])==null?void 0:I.reviews)!=null?(o(),f("div",Zs,[t(P,{name:"star",size:"20px",color:"warning"}),c(" "+a(E(q).computeAverageRating((j=R.value[s==null?void 0:s.id])==null?void 0:j.reviews))+" ",1),e("span",ps,"("+a((O=R.value[s==null?void 0:s.id])==null?void 0:O.reviews[0].reviewCount)+")",1)])):(o(),f("div",ys,[t(P,{name:"star_border",size:"20px"}),c(" None ")]))])])])]}),_:2},1032,["onClick"]))]))),256))]),t(z,{class:"q-my-md"}),e("div",se,[t(rs,{rounded:"","no-caps":"",color:"warning",label:"Show more","icon-right":"expand_more",disable:((l=F.value)==null?void 0:l.nextPageToken)=="",onClick:es},null,8,["disable"])])]}),_:1}))])])]),_:1}))}});var Ue=as(ae,[["__scopeId","data-v-11e1a564"]]);export{Ue as default};
