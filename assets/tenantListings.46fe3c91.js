import{Q as U}from"./use-dark.021a37f0.js";import{_ as ss,d as es,k as j,aS as as,u as ts,aa as ls,r as H,c as r,o as os,m as l,n as u,p as i,q as e,f as a,y as is,z as t,s as c,B as E,v,x as T,aB as ns,F as A,C as P,t as L,Q as cs,D as ds,E as us}from"./index.6f40f7fe.js";import{Q as rs}from"./QItemSection.5e932dd1.js";import{Q as w}from"./QChip.c8d6ca79.js";import{Q as C}from"./QCard.062ea066.js";import{Q as z}from"./QSeparator.a19ab3ec.js";import{a as ms,Q as _s}from"./QCarousel.5a429ae6.js";import{Q as $}from"./QTooltip.cb51c693.js";import{Q as vs}from"./QItemLabel.4ce23d48.js";import{Q as fs}from"./QSpace.d9b8bef3.js";import{Q as hs}from"./QCircularProgress.3c815201.js";import{Q as gs}from"./QPage.6672a000.js";import{_ as xs}from"./default-avatar-icon.adf04dc9.js";import{u as ws}from"./property.b36a709a.js";import{u as bs}from"./user.f4e3126f.js";import{u as ks}from"./account.4d31b5ec.js";import"./use-panel.b3e41fe6.js";import"./touch.3df10340.js";import"./selection.fdc08f2f.js";import"./use-cache.b0833c75.js";import"./position-engine.a52169fb.js";import"./use-timeout.5be3eec1.js";import"./focus-manager.b507780d.js";import"./scroll.9892f322.js";import"./format.c860d4da.js";const Y=b=>(ds("data-v-04ea1fa3"),b=b(),us(),b),qs={class:"row justify-between q-mt-md"},Qs={class:"col-xl-12 col-lg-4 col-md-4 col-sm-12 col-xs-12 q-pa-md q-ml-xs"},Ss={class:"column items-center"},Es={class:"row q-ma-md"},Ps={class:"text-bold text-h5"},Cs={class:"column items-start",style:{"align-content":"center"}},Rs={class:"q-ml-xs text-bold"},Is=Y(()=>e("span",{class:"q-ml-xs text-bold"},"English",-1)),Us={class:"q-ml-xs text-bold"},Ts={class:"q-ml-xs text-bold"},As={class:"q-ml-xs text-bold"},Ls={class:"col-xl-7 col-lg-12 col-md-12 col-sm-12 col-xs-12"},zs={class:"text-bold text-h5"},Bs={class:"row"},Ns={class:"col-xl-4 col-lg-4 col-md-5 col-sm-6 col-xs-12 q-py-md q-px-md cursor-pointer"},Ms={class:"row"},Fs={class:"q-my-sm"},Vs={class:"row"},Ds={key:0},Os={class:"q-mr-sm"},js={class:"q-mt-md"},Hs={class:"row"},$s={class:"text-bold text-positive"},Ys={class:"text-black"},Gs={key:0},Js={class:"text-grey"},Ks={key:1},Ws={class:"q-pa-lg flex flex-center"},Xs={class:"text-center q-pa-md col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12"},Zs=Y(()=>e("p",null,"Loading please wait",-1)),ps=es({__name:"tenantListings",setup(b){const B=j(),k=as();ts();const q=ls(),G=bs(),Q=ks(),m=ws();j();const f=H(20),N=H([1,1,1,1,1,1,1,1,1,1,1]);r(()=>G.getAvatar);const S=r(()=>m.getProperties),R=r(()=>m.getPropertyReviews);r(()=>m.getPropertyRating);const J=r(()=>S.value.map(h=>h.id));r(()=>Q.getHostAvatar);const n=r(()=>Q.getHost),M=r(()=>m.getResponse),K=r(()=>m.isLoading);async function W(){await Q.findUserPhoto({objectType:"USER",objectIds:[k.params.id],fileType:"FILE_TYPE_IMAGE"},!0)}async function X(){await m.findPropertyDetails({pageSize:6,tenantId:k.params.id,hostId:B.currentUser().aud[0]})}async function Z(){await Q.findUserInfo({ids:[k.params.id]},!0)}async function p(){S.value.length>0&&await m.findPropertyRating({objectType:"PROPERTY",object_ids:J.value},1)}async function y(){var h;await m.findPropertyDetails({pageSize:6,tenantId:k.params.id,hostId:B.currentUser().aud[0],pageToken:(h=M.value)==null?void 0:h.nextPageToken})}return os(async()=>{await X(),await p(),await W(),await Z()}),(h,F)=>(l(),u(gs,{class:"q-mx-md"},{default:i(()=>[e("div",qs,[a(C,{flat:"",bordered:"",class:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 q-px-lg q-my-md"},{default:i(()=>{var g,x;return[e("div",Qs,[e("div",Ss,[e("div",Es,[a(rs,{avatar:""},{default:i(()=>[a(is,{size:"100px"},{default:i(()=>{var o,s;return[(o=n.value)!=null&&o.imgUri?(l(),u(U,{key:0,src:(s=n.value)==null?void 0:s.imgUri},null,8,["src"])):(l(),u(U,{key:1,src:xs}))]}),_:1})]),_:1})]),e("div",Ps,t((g=n.value)==null?void 0:g.firstName)+" "+t((x=n.value)==null?void 0:x.lastName),1),e("div",Cs,[a(w,{"text-color":"black",color:"white",icon:"home",size:"15px",class:"start"},{default:i(()=>{var o,s,_;return[c(" Currently lives in "),e("span",Rs,t(((o=n.value)==null?void 0:o.addressLine)!=""&&((s=n.value)==null?void 0:s.addressLine)!=null?(_=n.value)==null?void 0:_.addressLine:"Not available"),1)]}),_:1}),a(w,{"text-color":"black",color:"white",icon:"language",size:"15px",class:"start"},{default:i(()=>[c(" Language spoken "),Is]),_:1}),a(w,{"text-color":"black",color:"white",icon:"event",size:"15px",class:"start"},{default:i(()=>{var o;return[c(" Joined on "),e("span",Us,t(E(q).formatStartDate((o=n.value)==null?void 0:o.created)),1)]}),_:1}),a(w,{"text-color":"black",color:"white",icon:"email",size:"15px",class:"start"},{default:i(()=>{var o;return[c(" Email on "),e("span",Ts,t((o=n.value)==null?void 0:o.email),1)]}),_:1}),a(w,{"text-color":"black",color:"white",icon:"call",size:"15px",class:"start"},{default:i(()=>{var o;return[c(" Phone on "),e("span",As,t((o=n.value)==null?void 0:o.phone),1)]}),_:1})])])])]}),_:1}),e("div",Ls,[K.value?(l(),u(C,{key:1,style:{width:"100%"},class:"row justify-center",flat:""},{default:i(()=>[e("div",Xs,[Zs,a(hs,{indeterminate:"",rounded:"",size:"50px",color:"warning",class:"q-ma-md"})])]),_:1})):(l(),u(C,{key:0,bordered:"",flat:"",class:"col-xl-7 col-lg-7 col-md-12 col-sm-12 col-xs-12 q-px-lg q-py-md"},{default:i(()=>{var g,x,o;return[e("div",zs,t((g=n.value)==null?void 0:g.firstName)+" "+t((x=n.value)==null?void 0:x.lastName)+"'s listings",1),a(z,{class:"q-my-lg",style:{width:"5%"}}),e("div",Bs,[(l(!0),v(A,null,T(S.value,(s,_)=>(l(),v("div",Ns,[(l(),u(C,{key:_,flat:"",onClick:I=>h.$router.push(`/listing-stay-details/${s.id}`)},{default:i(()=>{var I,V,D;return[(l(),u(ms,{modelValue:N.value[_],"onUpdate:modelValue":d=>N.value[_]=d,"transition-prev":"slide-right","transition-next":"slide-left",swipeable:"",animated:"",arrows:"","control-color":"amber",height:"auto",key:_,autoplay:!1,infinite:"",onClick:F[0]||(F[0]=ns(()=>{},["stop"]))},{default:i(()=>{var d;return[(l(!0),v(A,null,T((d=S.value[0])==null?void 0:d.images,O=>(l(),u(_s,{name:O.id,class:"q-carousel__slides-container",key:_},{default:i(()=>[e("div",Ms,[a(U,{ratio:4/3,class:"row",src:O.uri},null,8,["src"])])]),_:2},1032,["name"]))),128))]}),_:2},1032,["modelValue","onUpdate:modelValue"])),e("div",Fs,[e("div",Vs,[(l(!0),v(A,null,T(s==null?void 0:s.features,d=>(l(),v("div",null,[d.feature=="FEATURE_BATH_ROOMS"||d.feature=="FEATURE_BED_ROOMS"?(l(),v("div",Ds,[a(P,{name:E(q).featureIcon(d.feature),class:"q-my-md q-mr-xs"},null,8,["name"]),e("span",Os,t(d.value)+" "+t(d.feature=="FEATURE_SQUARE_METERS"?"Sq.Ft":d.feature=="FEATURE_BED_ROOMS"?"beds":"baths"),1)])):L("",!0)]))),256))]),e("div",null,[a(vs,{class:"two-line-break text-h6 text-bold"},{default:i(()=>[c(t((s==null?void 0:s.name.length)>f.value?s.name.substring(0,f.value)+"...":s.name)+" ",1),s.name>f.value?(l(),u($,{key:0},{default:i(()=>[c(t(s.name),1)]),_:2},1024)):L("",!0)]),_:2},1024),e("div",js,[a(P,{name:"location_on",class:"no-margin",size:"20px"}),e("span",null,[c(t((s==null?void 0:s.address.street)>f.value?(s==null?void 0:s.address.street.substring(0,f.value))+"...":s==null?void 0:s.address.street)+" ",1),(s==null?void 0:s.address.street.length)>f.value?(l(),u($,{key:0},{default:i(()=>[c(t(s==null?void 0:s.address.street),1)]),_:2},1024)):L("",!0)])]),a(z,{class:"q-my-md",style:{width:"20%"}}),e("div",Hs,[e("div",null,[e("div",$s,[c(t(s==null?void 0:s.unitPrice.currencyCode)+" "+t(E(q).commaSeparate(s==null?void 0:s.unitPrice.units))+" /",1),e("span",Ys,t(s==null?void 0:s.chargeCycle.toLowerCase()),1)])]),a(fs),((I=R.value[s==null?void 0:s.id])==null?void 0:I.reviews)!=null?(l(),v("div",Gs,[a(P,{name:"star",size:"20px",color:"warning"}),c(" "+t(E(q).computeAverageRating((V=R.value[s==null?void 0:s.id])==null?void 0:V.reviews))+" ",1),e("span",Js,"("+t((D=R.value[s==null?void 0:s.id])==null?void 0:D.reviews[0].reviewCount)+")",1)])):(l(),v("div",Ks,[a(P,{name:"star_border",size:"20px"}),c(" None ")]))])])])]}),_:2},1032,["onClick"]))]))),256))]),a(z,{class:"q-my-md"}),e("div",Ws,[a(cs,{rounded:"","no-caps":"",color:"warning",label:"Show more","icon-right":"expand_more",disable:((o=M.value)==null?void 0:o.nextPageToken)=="",onClick:y},null,8,["disable"])])]}),_:1}))])])]),_:1}))}});var Se=ss(ps,[["__scopeId","data-v-04ea1fa3"]]);export{Se as default};
