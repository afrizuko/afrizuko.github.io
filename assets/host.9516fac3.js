import{Q as P}from"./use-dark.021a37f0.js";import{_ as qe,d as Qe,aS as Se,u as Ee,aa as Ie,k as Pe,r as p,c,o as ye,aH as Ue,m as i,n as m,p as a,q as s,f as t,y as ne,z as l,B as b,s as u,v as f,Q as Y,aC as H,x as A,aB as Ce,F as V,C as y,t as L,D as Te,E as Ae}from"./index.6f40f7fe.js";import{Q as N}from"./QItemSection.5e932dd1.js";import{Q as re}from"./QCheckbox.12bd5bcd.js";import{Q as Ve}from"./QScrollArea.61e3531f.js";import{Q as q}from"./QSeparator.a19ab3ec.js";import{Q as G}from"./QChip.c8d6ca79.js";import{Q as de}from"./QRating.a909e371.js";import{Q as Le}from"./QInput.e9b2e6e3.js";import{Q as j}from"./QCard.062ea066.js";import{Q as Ne}from"./QBtnGroup.51533543.js";import{a as je,Q as Be}from"./QCarousel.5a429ae6.js";import{Q as ce}from"./QTooltip.cb51c693.js";import{Q as U}from"./QItemLabel.4ce23d48.js";import{Q as J}from"./QSpace.d9b8bef3.js";import{Q as Oe}from"./QPagination.66d781cb.js";import{Q as ze}from"./QItem.40a7b2b5.js";import{Q as Fe}from"./QList.ea469e4f.js";import{Q as Me}from"./QPage.6672a000.js";import{_ as ue}from"./default-avatar-icon.adf04dc9.js";import{u as $e}from"./property.b36a709a.js";import{u as De}from"./user.f4e3126f.js";import{u as We}from"./account.4d31b5ec.js";import{_ as Ye}from"./NewsLetter.8cec10da.js";import{_ as He}from"./TypesOfStays.0573218b.js";import"./use-checkbox.9fde503a.js";import"./use-form.0e0408c3.js";import"./QResizeObserver.f5a88aaf.js";import"./QScrollObserver.a5528810.js";import"./scroll.9892f322.js";import"./TouchPan.275b30ae.js";import"./touch.3df10340.js";import"./selection.fdc08f2f.js";import"./format.c860d4da.js";import"./uid.42677368.js";import"./focus-manager.b507780d.js";import"./use-panel.b3e41fe6.js";import"./use-cache.b0833c75.js";import"./position-engine.a52169fb.js";import"./use-timeout.5be3eec1.js";import"./home.07248801.js";const K=C=>(Te("data-v-9854db20"),C=C(),Ae(),C),Ge={class:"row justify-between q-mt-xl"},Je={class:"col-xl-5 col-lg-5 col-md-12 col-sm-12 col-xs-12 q-px-lg"},Ke={class:"column items-center"},Xe={class:"row q-ma-md"},Ze={class:"text-bold text-h5"},et={class:"text-grey"},tt=K(()=>s("span",{class:"text-grey"},"No rating",-1)),st={class:"text-center text-subtitle1",style:{width:"50%"}},at={key:1},lt={class:"column items-start",style:{"align-content":"center"}},ot={class:"q-ml-xs text-bold"},it=K(()=>s("span",{class:"q-ml-xs text-bold"},"English",-1)),nt={class:"q-ml-xs text-bold"},rt=K(()=>s("div",null,[s("h1",{class:"text-weight-bold text-h6 q-mb-sm q-mx-md"},"Leave a comment")],-1)),dt={class:"q-mx-md"},ct={class:"col-xl-7 col-lg-7 col-md-12 col-sm-12 col-xs-12 q-px-lg"},ut={class:"text-bold text-h5"},mt={class:"text-subtitle1"},vt={class:"row"},_t={class:"col-xl-4 col-lg-6 col-md-5 col-sm-5 col-xs-12 q-py-md q-px-md cursor-pointer"},ft={class:"row"},gt={class:"absolute-top-right no-padding",style:{"background-color":"transparent"}},ht={class:"q-my-sm"},wt={class:"row"},xt={key:0},bt={class:"q-mr-sm"},kt={class:"q-mt-md"},Rt={class:"row"},pt={class:"text-bold text-positive"},qt={class:"text-black"},Qt={key:0},St={class:"text-grey"},Et={key:1},It={class:"q-pa-lg flex flex-center"},Pt=Qe({__name:"host",setup(C){var ae;const k=Se(),me=Ee(),w=Ie(),T=De(),g=We(),v=$e(),ve=Pe(),B=p(!1),O=p(8),z=p(1),Q=p(20),X=p([1,1,1,1,1,1,1,1,1,1,1]),h=p("Stays");c(()=>T.getAvatar);const R=c(()=>T.getUserRating),E=c(()=>v.getProperties);c(()=>v.getImages);const Z=c(()=>{const r=(z.value-1)*O.value,n=r+O.value;return E.value.slice(r,n)}),_e=c(()=>Math.ceil(E.value.length/O.value)),x=p({rating:0,comment:null,authorId:(ae=ve.currentUser())==null?void 0:ae.sub,objectType:"USER",objectId:String(k.params.id)}),ee=c(()=>v.getReviewerAvatars),F=c(()=>v.getPropertyReviews);c(()=>v.getPropertyRating);const I=c(()=>{var r;return(r=T.getUserRating[k.params.id])==null?void 0:r.reviews}),M=c(()=>Object.keys(R.value)),$=c(()=>E.value.map(r=>r.id)),D=c(()=>g.getWishlist);c(()=>g.getHostAvatar);const d=c(()=>g.getHost);c(()=>JSON.stringify(v.getPropertyReviews)===JSON.stringify({}));const W=c(()=>v.getResponse);async function fe(){await g.findUserPhoto({objectType:"USER",objectIds:[k.params.id],fileType:"FILE_TYPE_IMAGE"},!0)}function te(){const r=window.scrollY,n=70;console.log("scrollPosition => "+r),console.log("threshold => "+n),B.value=r>n&&r<524}async function ge(){var r;((r=M.value)==null?void 0:r.length)>1&&await v.findReviewerAvatars({objectType:"USER",objectIds:M.value})}async function se(){await g.findWishListByPropertyId({objectType:"PROPERTY",objectId:$.value})}async function he(){let r={objectType:"PROPERTY",objectIds:$.value,fileType:"FILE_TYPE_IMAGE"};await v.findPropertyImages(r)}async function we(){await v.findPropertyDetails({hostId:k.params.id})}async function xe(){await g.findUserInfo({ids:[k.params.id]},!0)}async function be(r){let n={objectType:"PROPERTY",objectId:r};D.value[r]!=null?await g.removeFromWishList(n):await g.addToWishList(n),w.showAlert(g.getResponse.message,g.getResponse.code,"bottom-left"),await se()}async function ke(){E.value.length>0&&await v.findPropertyRating({objectType:"PROPERTY",object_ids:$.value},1)}async function Re(){if(sessionStorage.getItem("token")==null){await me.push("/login");return}await v.submitUserReview(x.value),W.value.code==0&&(x.value.comment=null,x.value.rating=0),w.showAlert(W.value.message,W.value.code,"")}async function pe(){E.value.length>0&&await T.findUserRatings({objectType:"USER",objectIds:[k.params.id]})}return ye(async()=>{window.addEventListener("scroll",te),await we(),await he(),await ke(),await se(),await fe(),await xe(),await pe(),await ge()}),Ue(()=>{window.removeEventListener("scroll",te)}),(r,n)=>(i(),m(Me,{class:"q-mx-xl"},{default:a(()=>[s("div",Ge,[s("div",Je,[t(j,{flat:"",bordered:"",class:H([{"fixed-card":B.value,card:!B.value},"col-xl-12 col-lg-4 col-md-4 col-sm-12 col-xs-12 q-pa-md q-ml-xs"])},{default:a(()=>{var e;return[s("div",Ke,[s("div",Xe,[t(N,{avatar:""},{default:a(()=>[t(ne,{size:"100px"},{default:a(()=>[d.value.imgUri?(i(),m(P,{key:0,src:d.value.imgUri},null,8,["src"])):(i(),m(P,{key:1,src:ue}))]),_:1})]),_:1})]),s("div",Ze,l(d.value.firstName)+" "+l(d.value.lastName),1),s("div",null,[b(w).computeAverageRating(I.value==null?[]:I.value)>0?(i(),m(re,{key:0,"checked-icon":"star","unchecked-icon":"star","indeterminate-icon":"star",color:"warning","model-value":""},{default:a(()=>{var o;return[u(l(b(w).computeAverageRating(I.value==null?[]:I.value))+" ",1),s("span",et,"("+l((o=I.value)==null?void 0:o.length)+")",1)]}),_:1})):(i(),m(re,{key:1,"checked-icon":"star_outline","unchecked-icon":"star_outline","indeterminate-icon":"star_outline",color:"black","model-value":""},{default:a(()=>[tt]),_:1}))]),s("div",st,[((e=d.value.narration)==null?void 0:e.length)>50?(i(),m(Ve,{key:0,style:{height:"100px","max-width":"300px"},class:"text-center"},{default:a(()=>[u(l(d.value.narration!==""?d.value.narration:"No introduction yet"),1)]),_:1})):(i(),f("div",at,l(d.value.narration!==""?d.value.narration:"No introduction yet"),1))])]),t(q,{inset:"",class:"q-my-md"}),s("div",lt,[t(G,{"text-color":"black",color:"white",icon:"home",size:"15px",class:"start"},{default:a(()=>[u(" Currently lives in "),s("span",ot,l(d.value.addressLine!=""&&d.value.addressLine!=null?d.value.addressLine:"Not available"),1)]),_:1}),t(G,{"text-color":"black",color:"white",icon:"language",size:"15px",class:"start"},{default:a(()=>[u(" Language spoken "),it]),_:1}),t(G,{"text-color":"black",color:"white",icon:"event",size:"15px",class:"start"},{default:a(()=>[u(" Joined on "),s("span",nt,l(b(w).formatStartDate(d.value.created)),1)]),_:1})]),t(q,{inset:"",class:"q-my-md"}),rt,t(q,{class:"q-my-md",style:{width:"10%","margin-left":"15px"}}),s("div",dt,[t(de,{size:"20px",modelValue:x.value.rating,"onUpdate:modelValue":n[0]||(n[0]=o=>x.value.rating=o),max:5,color:"warning",icon:"star_border","icon-selected":"star","icon-half":"star_half"},null,8,["modelValue"]),t(Le,{rounded:"",outlined:"","bottom-slots":"",label:"Share your thoughts...",class:"q-my-md",color:"grey",modelValue:x.value.comment,"onUpdate:modelValue":n[1]||(n[1]=o=>x.value.comment=o)},{append:a(()=>[t(Y,{round:"",dense:"",color:"purple-9",icon:"arrow_forward",disable:x.value.comment==""||x.value.comment==null,onClick:Re},null,8,["disable"])]),_:1},8,["modelValue"])])]}),_:1},8,["class"])]),s("div",ct,[t(j,{bordered:"",flat:"",class:"col-xl-7 col-lg-7 col-md-12 col-sm-12 col-xs-12 q-px-lg q-py-md"},{default:a(()=>[s("div",ut,l(d.value.firstName)+" "+l(d.value.lastName)+"'s listings",1),s("div",mt,l(d.value.firstName)+" "+l(d.value.lastName)+"'s listings is very rich, 5 star reviews help him to be more branded. ",1),t(q,{class:"q-my-lg",style:{width:"5%"}}),t(Ne,{rounded:"",class:"q-my-sm"},{default:a(()=>[t(Y,{"no-caps":"",rounded:"",color:h.value=="Stays"?"warning":"",label:"Other Listings",modelValue:h.value,"onUpdate:modelValue":n[2]||(n[2]=e=>h.value=e),onClick:n[3]||(n[3]=e=>h.value="Stays"),class:H({"text-black":h.value!="Stays"})},null,8,["color","modelValue","class"]),t(Y,{"no-caps":"",rounded:"",color:h.value=="Experiences"?"warning":"",label:"Experiences",modelValue:h.value,"onUpdate:modelValue":n[4]||(n[4]=e=>h.value=e),onClick:n[5]||(n[5]=e=>h.value="Experiences"),class:H({"text-black":h.value!="Experiences"})},null,8,["color","modelValue","class"])]),_:1}),s("div",vt,[(i(!0),f(V,null,A(Z.value,(e,o)=>(i(),f("div",_t,[(i(),m(j,{key:o,flat:"",onClick:S=>r.$router.push(`/listing-stay-details/${e.id}`)},{default:a(()=>{var S,le,oe;return[(i(),m(je,{modelValue:X.value[o],"onUpdate:modelValue":_=>X.value[o]=_,"transition-prev":"slide-right","transition-next":"slide-left",swipeable:"",animated:"",arrows:"","control-color":"amber",height:"auto",key:o,autoplay:!0,infinite:"",onClick:n[6]||(n[6]=Ce(()=>{},["stop"]))},{default:a(()=>{var _;return[(i(!0),f(V,null,A((_=Z.value[0])==null?void 0:_.images,ie=>(i(),m(Be,{name:ie.id,class:"q-carousel__slides-container",key:o},{default:a(()=>[s("div",ft,[t(P,{ratio:4/3,class:"row",src:ie.uri},{default:a(()=>[s("div",gt,[t(y,{size:"25px",class:"q-mr-sm q-mt-sm",color:D.value[e==null?void 0:e.id]==null?"primary":"negative",name:D.value[e==null?void 0:e.id]!=null?"favorite":"favorite_border",onClick:yt=>be(e==null?void 0:e.id)},null,8,["color","name","onClick"])])]),_:2},1032,["src"])])]),_:2},1032,["name"]))),128))]}),_:2},1032,["modelValue","onUpdate:modelValue"])),s("div",ht,[s("div",wt,[(i(!0),f(V,null,A(e==null?void 0:e.features,_=>(i(),f("div",null,[_.feature=="FEATURE_BATH_ROOMS"||_.feature=="FEATURE_BED_ROOMS"?(i(),f("div",xt,[t(y,{name:b(w).featureIcon(_.feature),class:"q-my-md q-mr-xs"},null,8,["name"]),s("span",bt,l(_.value)+" "+l(_.feature=="FEATURE_SQUARE_METERS"?"Sq.Ft":_.feature=="FEATURE_BED_ROOMS"?"beds":"baths"),1)])):L("",!0)]))),256))]),s("div",null,[t(U,{class:"two-line-break text-h6 text-bold"},{default:a(()=>[u(l((e==null?void 0:e.name.length)>Q.value?e.name.substring(0,Q.value)+"...":e.name)+" ",1),e.name>Q.value?(i(),m(ce,{key:0},{default:a(()=>[u(l(e.name),1)]),_:2},1024)):L("",!0)]),_:2},1024),s("div",kt,[t(y,{name:"location_on",class:"no-margin",size:"20px"}),s("span",null,[u(l((e==null?void 0:e.address.street)>Q.value?(e==null?void 0:e.address.street.substring(0,Q.value))+"...":e==null?void 0:e.address.street)+" ",1),(e==null?void 0:e.address.street.length)>Q.value?(i(),m(ce,{key:0},{default:a(()=>[u(l(e==null?void 0:e.address.street),1)]),_:2},1024)):L("",!0)])]),t(q,{class:"q-my-md",style:{width:"20%"}}),s("div",Rt,[s("div",null,[s("div",pt,[u(l(e.unitPrice.currencyCode)+" "+l(b(w).commaSeparate(e.unitPrice.units))+" /",1),s("span",qt,l(e.chargeCycle.toLowerCase()),1)])]),t(J),((S=F.value[e==null?void 0:e.id])==null?void 0:S.reviews)!=null?(i(),f("div",Qt,[t(y,{name:"star",size:"20px",color:"warning"}),u(" "+l(b(w).computeAverageRating((le=F.value[e==null?void 0:e.id])==null?void 0:le.reviews))+" ",1),s("span",St,"("+l((oe=F.value[e==null?void 0:e.id])==null?void 0:oe.reviews[0].reviewCount)+")",1)])):(i(),f("div",Et,[t(y,{name:"star_border",size:"20px"}),u(" None ")]))])])])]}),_:2},1032,["onClick"]))]))),256))]),s("div",It,[t(Oe,{modelValue:z.value,"onUpdate:modelValue":n[7]||(n[7]=e=>z.value=e),max:_e.value,input:"","direction-links":"","icon-first":"skip_previous","icon-last":"skip_next","icon-prev":"fast_rewind","icon-next":"fast_forward",color:"warning"},null,8,["modelValue","max"])])]),_:1}),t(j,{bordered:"",flat:"",class:"q-pa-md q-mt-xl"},{default:a(()=>[t(Fe,{bordered:"",class:"rounded-borders"},{default:a(()=>[t(U,{header:"",class:"text-black text-bold text-h5"},{default:a(()=>{var e;return[u("Reviews ("+l((e=R.value[b(k).params.id])==null?void 0:e.reviews.length)+" reviews) ",1)]}),_:1}),t(q,{class:"q-my-md",style:{width:"5%","margin-left":"15px"}}),(i(!0),f(V,null,A(M.value,e=>(i(),f("div",null,[t(ze,null,{default:a(()=>[t(N,{avatar:"",class:"q-pb-lg"},{default:a(()=>[t(ne,null,{default:a(()=>{var o;return[ee.value[e]!=null?(i(),m(P,{key:0,src:(o=ee.value[e].files[0])==null?void 0:o.uri},null,8,["src"])):(i(),m(P,{key:1,src:ue}))]}),_:2},1024)]),_:2},1024),t(N,{class:"q-pt-md"},{default:a(()=>[t(U,{lines:"1",class:"text-weight-bold"},{default:a(()=>{var o,S;return[u(l((o=R.value[e])==null?void 0:o.reviews[0].user.firstName)+" "+l((S=R.value[e])==null?void 0:S.reviews[0].lastName),1)]}),_:2},1024),t(U,{lines:"1",class:"q-mb-sm"},{default:a(()=>{var o;return[u(l(b(w).formatStartDate((o=R.value[e])==null?void 0:o.reviews[0].created)),1)]}),_:2},1024),t(U,{class:"text-subtitle1"},{default:a(()=>{var o;return[u(l((o=R.value[e])==null?void 0:o.reviews[0].comment),1)]}),_:2},1024)]),_:2},1024),t(N,{side:"",top:""},{default:a(()=>{var o;return[t(de,{"model-value":(o=R.value[e])==null?void 0:o.reviews[0].rating,color:"warning",max:5},null,8,["model-value"])]}),_:2},1024)]),_:2},1024),r.i!=5?(i(),m(q,{key:0,inset:"item",class:"q-my-md"})):L("",!0)]))),256))]),_:1})]),_:1})])]),t(J,{style:{height:"100px"}}),t(He),t(J,{style:{height:"150px"}}),t(Ye)]),_:1}))}});var ws=qe(Pt,[["__scopeId","data-v-9854db20"]]);export{ws as default};
